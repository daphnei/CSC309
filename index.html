<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="./style.css">
        <script src="./jquery.js"></script>
    </head>
    <body>
        <div id="frontpage">
            <div id="header">
                <h2 id="site_name"><a href="./index.html">Unicorn News</a></h2>
                
                <ul id="navigation">
                    <li><a href="#" id="submit">Submit</a></li>
                </ul>
                
            </div>
            
            <div id="submission_form"> </div>
            
            <ol id="content">
                <li id="topic1" class="topic">
                    <h3 class="topic_title"> <a href="#">Unicorns a myth?</a> </h3>
                    <ul class="counts">
                        <li> 9000 points </li>
                        <li> | </li>
                        <li> <a href="#">253 comments</a> </li>
                    </ul>
                </li>
                
                <li id="topic2" class="topic">
                    <h3 class="topic_title"> <a href="#">1001 ways to clean Unicorn Horns</a> </h3>
                    <ul class="counts">
                        <li> 75 points </li>
                        <li> | </li>
                        <li> <a href="#">38 comments</a> </li>
                    </ul>
                </li>
                
                <li id="topic3" class="topic">
                    <h3 class="topic_title"> <a href="#">Anyone know how to scrub magical powder off?</a> </h3>                    
                    <ul class="counts">
                        <li> 56 points </li>
                        <li> | </li>
                        <li> <a href="#">13 comments</a> </li>
                    </ul>
                </li>
                
                <li id="topic3" class="topic">
                    <h3 class="topic_title"> <a href="#">Bronies and Ponies living peacefully</a> </h3>
                    <ul class="counts">
                        <li> 26 points </li>
                        <li> | </li>
                        <li> <a href="#">2 comments</a> </li>
                    </ul>
                </li>
                
                <li id="topic4" class="topic">
                    <h3 class="topic_title"> <a href="#">Pegasi better than Unicorns, TROLOLOL!</a> </h3>
                    <ul class="counts">
                        <li> 0 points </li>
                        <li> | </li>
                        <li> <a href="#">768 comments</a> </li>
                    </ul>
                </li>
            </ol>
            
            <div id="footer">
            </div>
        </div>
    </body>
</html>

<script>
    
    // Single global variable app containing all the frontend functionality
    var app = {
        
        // Show the submission field on the frontpage
        show_form: function () {
            // HTML that creates the submission form
            var form = 
                '<form name="about_to_submit" id="super">' + 
                    '<label for="url">title:</label>' + 
                    '<input value="" type="text" size="60" name="title" id="submit_form"/>' + 
                    '<label for="url">url:</label>' + 
                    '<input value="" type="text" size="60" name="url" id="url_form"/>' + 
                
                    // Event handlers will be independent of HTML tags. Onclick will be removed, coming soon...
                    '<input value="Submit" type="button" name="do_submit" id="submit_button" onclick="app.submit_topic();"/>' +
                    '<input value="Cancel" type="button" name="do_cancel" id="submit_cancel" onclick="app.hide_form();"/>' +
                '</form>';
            
            $('#submission_form').html(form);
        },
        
        // Hide the submission field on the frontpage
        hide_form: function () {
            $('#submission_form').html('');
        },
        
        parse_form_input: function(data) {
            console.log('Look, I am parsing ' + data.value + ' Well, I will be soon.');
        },
        
        // Send submission request to server. Hide submission form
        submit_topic: function() {
            var form_data = $("#submission_form :input").serializeArray();
            
            $.each(form_data, function(i, data){
                app.parse_form_input(data);
            });
            
            // Send stuff to server...
            
            this.hide_form();
        }
    }
        
    // All event handlers
    $('#submit').click(function(){
            app.show_form();
    });
        
</script>